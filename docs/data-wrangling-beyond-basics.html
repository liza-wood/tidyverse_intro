<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Data wrangling: beyond basics | Tidyverse: Data wrangling &amp; visualization</title>
  <meta name="description" content="4 Data wrangling: beyond basics | Tidyverse: Data wrangling &amp; visualization" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Data wrangling: beyond basics | Tidyverse: Data wrangling &amp; visualization" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Data wrangling: beyond basics | Tidyverse: Data wrangling &amp; visualization" />
  
  
  

<meta name="author" content="Liza Wood" />


<meta name="date" content="2023-03-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-wrangling-basics.html"/>
<link rel="next" href="visualization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>0.1</b> Introduction</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>0.2</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html"><i class="fa fa-check"></i><b>1</b> Introduction to the Tidyverse</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#what-is-the-tidyverse"><i class="fa fa-check"></i><b>1.1</b> What is the tidyverse?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#installing-and-loading-in"><i class="fa fa-check"></i><b>1.2</b> Installing and loading in</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#palmer-station-penguins"><i class="fa fa-check"></i><b>2.1</b> Palmer Station penguins</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#palmer-station-weather"><i class="fa fa-check"></i><b>2.2</b> Palmer Station weather</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html"><i class="fa fa-check"></i><b>3</b> Data wrangling basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#outline"><i class="fa fa-check"></i><b>3.1</b> Outline</a></li>
<li class="chapter" data-level="3.2" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#reducing-data-dimensionality"><i class="fa fa-check"></i><b>3.2</b> Reducing data dimensionality</a></li>
<li class="chapter" data-level="3.3" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#combining-multiple-steps"><i class="fa fa-check"></i><b>3.3</b> Combining multiple steps</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#check-in-challenge"><i class="fa fa-check"></i><b>3.3.1</b> Check in challenge</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#creating-new-variables"><i class="fa fa-check"></i><b>3.4</b> Creating new variables</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#new-columns"><i class="fa fa-check"></i><b>3.4.1</b> New columns</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#summary-tables"><i class="fa fa-check"></i><b>3.4.2</b> Summary tables</a></li>
<li class="chapter" data-level="3.4.3" data-path="data-wrangling-basics.html"><a href="data-wrangling-basics.html#check-in-challenge-1"><i class="fa fa-check"></i><b>3.4.3</b> Check in challenge</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html"><i class="fa fa-check"></i><b>4</b> Data wrangling: beyond basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#outline-1"><i class="fa fa-check"></i><b>4.1</b> Outline</a></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#manipulating-date-variables"><i class="fa fa-check"></i><b>4.2</b> Manipulating date variables</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#check-in-challenge-2"><i class="fa fa-check"></i><b>4.2.1</b> Check in challenge</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#joining-multiple-data-frames"><i class="fa fa-check"></i><b>4.3</b> Joining multiple data frames</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#check-in-challenge-3"><i class="fa fa-check"></i><b>4.3.1</b> Check in challenge</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#reshaping-lengtheningwidening-data"><i class="fa fa-check"></i><b>4.3.2</b> Reshaping (lengthening/widening) data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-wrangling-beyond-basics.html"><a href="data-wrangling-beyond-basics.html#working-with-text"><i class="fa fa-check"></i><b>4.4</b> Working with text</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5</b> Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="visualization.html"><a href="visualization.html#outline-2"><i class="fa fa-check"></i><b>5.1</b> Outline</a></li>
<li class="chapter" data-level="5.2" data-path="visualization.html"><a href="visualization.html#plot-architecture"><i class="fa fa-check"></i><b>5.2</b> Plot architecture</a></li>
<li class="chapter" data-level="5.3" data-path="visualization.html"><a href="visualization.html#selecting-geometries"><i class="fa fa-check"></i><b>5.3</b> Selecting geometries</a></li>
<li class="chapter" data-level="5.4" data-path="visualization.html"><a href="visualization.html#challenge"><i class="fa fa-check"></i><b>5.4</b> Challenge</a></li>
<li class="chapter" data-level="5.5" data-path="visualization.html"><a href="visualization.html#styling-automatic-and-manual"><i class="fa fa-check"></i><b>5.5</b> Styling (automatic and manual)</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tidyverse: Data wrangling &amp; visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling-beyond-basics" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Data wrangling: beyond basics<a href="data-wrangling-beyond-basics.html#data-wrangling-beyond-basics" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="outline-1" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Outline<a href="data-wrangling-beyond-basics.html#outline-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Manipulating date variables
<ul>
<li><code>lubrdiate</code> package: Use date format functions (e.g. <code>ymd</code>) to specify date data formats</li>
</ul></li>
<li>Joining multiple data frames
<ul>
<li><code>_join</code> series: Combine two data frames by one or more shared columns. Specify with kind of join(<code>full_</code>, <code>left_</code>, etc.) to determine which observations are kept/dropped.</li>
</ul></li>
<li>Reshaping (lengthening/widening) data
<ul>
<li><code>pivot_longer</code></li>
<li><code>pivot_wider</code></li>
</ul></li>
<li>Working with text to separate/combine columns
<ul>
<li><code>separate</code>:</li>
<li><code>paste</code>:</li>
</ul></li>
</ul>
</div>
<div id="manipulating-date-variables" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Manipulating date variables<a href="data-wrangling-beyond-basics.html#manipulating-date-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Remember the weather data we loaded in at the start. We have weather data from the Palmer Station in Antarctica from 1989 - 2019. These data are available for each day</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-wrangling-beyond-basics.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(weather)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10674 obs. of  24 variables:
##  $ Date                           : chr  &quot;1989-04-01&quot; &quot;1989-04-02&quot; &quot;1989-04-03&quot; &quot;1989-04-04&quot; ...
##  $ Temperature.High..C.           : num  2.8 1.1 -0.6 1.1 -0.6 2.5 -1.4 -0.8 -1 -1.5 ...
##  $ Temperature.Low..C.            : num  -1 -2.7 -3.5 -4.4 -2.9 -3.1 -3.2 -4.5 -4 -3.8 ...
##  $ Temperature.Average..C.        : num  0.9 -0.8 -2.05 -1.65 -1.75 -0.3 -2.3 -2.65 -2.5 -2.65 ...
##  $ Sea.Surface.Temperature..C.    : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ Sea.Ice..WMO.Code.             : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Pressure.High..mbar.           : num  1004 998 998 1002 1002 ...
##  $ Pressure.Low..mbar.            : num  998 995 995 998 997 ...
##  $ Pressure.Average..mbar.        : num  1001 996 997 1000 1000 ...
##  $ Windspeed.Peak                 : int  18 24 13 14 14 15 16 39 27 16 ...
##  $ Windspeed.5.Sec.Peak           : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ Windspeed.2.Min.Peak           : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Windspeed.Average              : num  4 9 8 6 4 4 8 14 11 6 ...
##  $ Wind.Peak.Direction..True...º. : int  110 30 60 210 230 180 40 120 50 60 ...
##  $ Wind.Peak.Direction..º.        : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Wind.5.Sec.Peak.Direction...º. : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Wind.2.Min.Peak.Direction...º. : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Wind.Direction.Prevailing      : chr  &quot;SW&quot; &quot;NE&quot; &quot;NE&quot; &quot;NW&quot; ...
##  $ Rainfall..mm.                  : num  0 0 0 0 0 0 1 0 0 -998 ...
##  $ Precipitation.Snow..cm.        : num  0 0 0 0 0 0 -998 0 0 -998 ...
##  $ Depth.at.Snowstake..cm.        : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ Cloud.Cover                    : int  4 2 5 5 10 2 9 5 0 10 ...
##  $ Data.flag...Temperature.Average: chr  &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; ...
##  $ Data.flag...Pressure.Average   : chr  &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; ...</code></pre>
<p>However, the structure of the data above indicate that the first variable, Date, is a ‘character’. This means that R is not reading these dates as numbers, and so we cannot manipulate them any further (e.g. extracting certain years).</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-wrangling-beyond-basics.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(weather<span class="sc">$</span>Date)</span></code></pre></div>
<pre><code>## [1] &quot;1989-04-01&quot; &quot;1989-04-02&quot; &quot;1989-04-03&quot; &quot;1989-04-04&quot; &quot;1989-04-05&quot;
## [6] &quot;1989-04-06&quot;</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-wrangling-beyond-basics.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(weather<span class="sc">$</span>Date)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>We want to use the <code>lubridate</code> package (loaded in when we load in <code>tidyverse</code>) to convert these variables into dates and create a column for the year.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-wrangling-beyond-basics.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">ymd</span>(weather<span class="sc">$</span>Date), <span class="at">n =</span> <span class="dv">75</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;1989-04-01&quot; &quot;1989-04-02&quot; &quot;1989-04-03&quot; &quot;1989-04-04&quot; &quot;1989-04-05&quot;
##  [6] &quot;1989-04-06&quot; &quot;1989-04-07&quot; &quot;1989-04-08&quot; &quot;1989-04-09&quot; &quot;1989-04-10&quot;
## [11] &quot;1989-04-11&quot; &quot;1989-04-12&quot; &quot;1989-04-13&quot; &quot;1989-04-14&quot; &quot;1989-04-15&quot;
## [16] &quot;1989-04-16&quot; &quot;1989-04-17&quot; &quot;1989-04-18&quot; &quot;1989-04-19&quot; &quot;1989-04-20&quot;
## [21] &quot;1989-04-21&quot; &quot;1989-04-22&quot; &quot;1989-04-23&quot; &quot;1989-04-24&quot; &quot;1989-04-25&quot;
## [26] &quot;1989-04-26&quot; &quot;1989-04-27&quot; &quot;1989-04-28&quot; &quot;1989-04-29&quot; &quot;1989-04-30&quot;
## [31] &quot;1989-05-01&quot; &quot;1989-05-02&quot; &quot;1989-05-03&quot; &quot;1989-05-04&quot; &quot;1989-05-05&quot;
## [36] &quot;1989-05-06&quot; &quot;1989-05-07&quot; &quot;1989-05-08&quot; &quot;1989-05-09&quot; &quot;1989-05-10&quot;
## [41] &quot;1989-05-11&quot; &quot;1989-05-12&quot; &quot;1989-05-13&quot; &quot;1989-05-14&quot; &quot;1989-05-15&quot;
## [46] &quot;1989-05-16&quot; &quot;1989-05-17&quot; &quot;1989-05-18&quot; &quot;1989-05-19&quot; &quot;1989-05-20&quot;
## [51] &quot;1989-05-21&quot; &quot;1989-05-22&quot; &quot;1989-05-23&quot; &quot;1989-05-24&quot; &quot;1989-05-25&quot;
## [56] &quot;1989-05-26&quot; &quot;1989-05-27&quot; &quot;1989-05-28&quot; &quot;1989-05-29&quot; &quot;1989-05-30&quot;
## [61] &quot;1989-05-31&quot; &quot;1989-06-01&quot; &quot;1989-06-02&quot; &quot;1989-06-03&quot; &quot;1989-06-04&quot;
## [66] &quot;1989-06-05&quot; &quot;1989-06-06&quot; &quot;1989-06-07&quot; &quot;1989-06-08&quot; &quot;1989-06-09&quot;
## [71] &quot;1989-06-10&quot; &quot;1989-06-11&quot; &quot;1989-06-12&quot; &quot;1989-06-13&quot; &quot;1989-06-14&quot;</code></pre>
<p>Use the mutate function to overwrite this variable in the weather data frame</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-wrangling-beyond-basics.html#cb72-1" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">mutate</span>(weather, <span class="at">Date =</span> <span class="fu">ymd</span>(Date))</span></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-wrangling-beyond-basics.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(weather<span class="sc">$</span>Date)</span></code></pre></div>
<pre><code>## [1] &quot;1989-04-01&quot; &quot;1989-04-02&quot; &quot;1989-04-03&quot; &quot;1989-04-04&quot; &quot;1989-04-05&quot;
## [6] &quot;1989-04-06&quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-wrangling-beyond-basics.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(weather<span class="sc">$</span>Date)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>Now that R recognizes these as dates, we can extract certain date-related features, such as the year, month, and day. The lubridate package has functions conveniently named <code>year()</code>, <code>month()</code>, <code>day()</code> that can be used with a date argument, and that element of the date will be extracted. For example:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-wrangling-beyond-basics.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">year</span>(weather<span class="sc">$</span>Date), <span class="at">n =</span> <span class="dv">75</span>)</span></code></pre></div>
<pre><code>##  [1] 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989
## [16] 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989
## [31] 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989
## [46] 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989
## [61] 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989 1989</code></pre>
<p>Again, let’s use mutate to assign this as a new column</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-wrangling-beyond-basics.html#cb79-1" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">mutate</span>(weather, <span class="at">year =</span> <span class="fu">year</span>(Date))</span></code></pre></div>
<div id="check-in-challenge-2" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Check in challenge<a href="data-wrangling-beyond-basics.html#check-in-challenge-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We are going to review our basic wrangling skills to prepare the Palmer Station weather data to merge with the penguins data.</p>
<p>We would like to merge a <em>summary</em> of the weather data with the penguins. For this summary, we want the data summarized by year, rather than by day (as it currently is). Then per year, we want to know the maximum, minimum, and average temperates. Create this summary table called ‘weather_summary’.</p>
<details>
<summary>
Check your answer
</summary>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-wrangling-beyond-basics.html#cb80-1" aria-hidden="true" tabindex="-1"></a>weather_summary <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="data-wrangling-beyond-basics.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="data-wrangling-beyond-basics.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">average_temp =</span> <span class="fu">mean</span>(Temperature.Average..C., <span class="at">na.rm =</span> T),</span>
<span id="cb80-4"><a href="data-wrangling-beyond-basics.html#cb80-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_temp =</span> <span class="fu">max</span>(Temperature.High..C., <span class="at">na.rm =</span> T),</span>
<span id="cb80-5"><a href="data-wrangling-beyond-basics.html#cb80-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_temp =</span> <span class="fu">min</span>(Temperature.Low..C., <span class="at">na.rm =</span> T))</span></code></pre></div>
</details>
</div>
</div>
<div id="joining-multiple-data-frames" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Joining multiple data frames<a href="data-wrangling-beyond-basics.html#joining-multiple-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>THIS IS WHERE I LEFT OFF</strong> <code>_join</code> series: Combine two data frames by one or more shared columns. Specify with kind of join(<code>full_</code>, <code>left_</code>, etc.) to determine which observations are kept/dropped.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-wrangling-beyond-basics.html#cb81-1" aria-hidden="true" tabindex="-1"></a>penguins_leftjoined <span class="ot">&lt;-</span> <span class="fu">left_join</span>(penguins, weather_summary, <span class="at">by =</span> <span class="st">&quot;year&quot;</span>)</span>
<span id="cb81-2"><a href="data-wrangling-beyond-basics.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(penguins_leftjoined)</span></code></pre></div>
<pre><code>## [1] 344  11</code></pre>
<div id="check-in-challenge-3" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Check in challenge<a href="data-wrangling-beyond-basics.html#check-in-challenge-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What happens when you use another kind of join?</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-wrangling-beyond-basics.html#cb83-1" aria-hidden="true" tabindex="-1"></a>penguins_fulljoined <span class="ot">&lt;-</span> <span class="fu">full_join</span>(penguins, weather_summary, <span class="at">by =</span> <span class="st">&quot;year&quot;</span>)</span>
<span id="cb83-2"><a href="data-wrangling-beyond-basics.html#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We now have more rows for</span></span>
<span id="cb83-3"><a href="data-wrangling-beyond-basics.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(penguins_fulljoined)</span></code></pre></div>
<pre><code>## [1] 372  11</code></pre>
</div>
<div id="reshaping-lengtheningwidening-data" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Reshaping (lengthening/widening) data<a href="data-wrangling-beyond-basics.html#reshaping-lengtheningwidening-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>pivot_longer</code></li>
<li><code>pivot_wider</code></li>
</ul>
<p>Pivot the data to make it wider, with one row per species and the columns representing the mean bill length, depth, and mass for that species.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-wrangling-beyond-basics.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot the data to make it longer</span></span>
<span id="cb85-2"><a href="data-wrangling-beyond-basics.html#cb85-2" aria-hidden="true" tabindex="-1"></a>penguins_longer <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(penguins, </span>
<span id="cb85-3"><a href="data-wrangling-beyond-basics.html#cb85-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">cols =</span> <span class="fu">c</span>(bill_length_mm, bill_depth_mm,</span>
<span id="cb85-4"><a href="data-wrangling-beyond-basics.html#cb85-4" aria-hidden="true" tabindex="-1"></a>                                         flipper_length_mm, body_mass_g), </span>
<span id="cb85-5"><a href="data-wrangling-beyond-basics.html#cb85-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">names_to =</span> <span class="st">&quot;measure&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-wrangling-beyond-basics.html#cb86-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pivot the data to make it wider, with one row per species and the columns representing the mean bill length, depth, and mass for that species.</span></span>
<span id="cb86-2"><a href="data-wrangling-beyond-basics.html#cb86-2" aria-hidden="true" tabindex="-1"></a>    penguins_wider <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean_bill_length_mm =</span> <span class="fu">mean</span>(bill_length_mm), <span class="at">mean_bill_depth_mm =</span> <span class="fu">mean</span>(bill_depth_mm), <span class="at">mean_body_mass_g =</span> <span class="fu">mean</span>(body_mass_g))</span>
<span id="cb86-3"><a href="data-wrangling-beyond-basics.html#cb86-3" aria-hidden="true" tabindex="-1"></a>    penguins_wider <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(penguins_wider, <span class="at">names_from =</span> <span class="st">&quot;species&quot;</span>, <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;mean_bill_length_mm&quot;</span>, <span class="st">&quot;mean_bill_depth_mm&quot;</span>, <span class="st">&quot;mean_body_mass_g&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="working-with-text" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Working with text<a href="data-wrangling-beyond-basics.html#working-with-text" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><code>separate</code>:</li>
<li><code>paste</code>:</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-wrangling-beyond-basics.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the Palmer Penguins dataset (with additional missing values)</span></span>
<span id="cb87-2"><a href="data-wrangling-beyond-basics.html#cb87-2" aria-hidden="true" tabindex="-1"></a>penguins_raw</span></code></pre></div>
<pre><code>## # A tibble: 344 × 17
##    studyName Sample Num…¹ Species Region Island Stage Indiv…² Clutc…³ `Date Egg`
##    &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;date&gt;    
##  1 PAL0708              1 Adelie… Anvers Torge… Adul… N1A1    Yes     2007-11-11
##  2 PAL0708              2 Adelie… Anvers Torge… Adul… N1A2    Yes     2007-11-11
##  3 PAL0708              3 Adelie… Anvers Torge… Adul… N2A1    Yes     2007-11-16
##  4 PAL0708              4 Adelie… Anvers Torge… Adul… N2A2    Yes     2007-11-16
##  5 PAL0708              5 Adelie… Anvers Torge… Adul… N3A1    Yes     2007-11-16
##  6 PAL0708              6 Adelie… Anvers Torge… Adul… N3A2    Yes     2007-11-16
##  7 PAL0708              7 Adelie… Anvers Torge… Adul… N4A1    No      2007-11-15
##  8 PAL0708              8 Adelie… Anvers Torge… Adul… N4A2    No      2007-11-15
##  9 PAL0708              9 Adelie… Anvers Torge… Adul… N5A1    Yes     2007-11-09
## 10 PAL0708             10 Adelie… Anvers Torge… Adul… N5A2    Yes     2007-11-09
## # … with 334 more rows, 8 more variables: `Culmen Length (mm)` &lt;dbl&gt;,
## #   `Culmen Depth (mm)` &lt;dbl&gt;, `Flipper Length (mm)` &lt;dbl&gt;,
## #   `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;, `Delta 15 N (o/oo)` &lt;dbl&gt;,
## #   `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;, and abbreviated variable names
## #   ¹​`Sample Number`, ²​`Individual ID`, ³​`Clutch Completion`</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-wrangling-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
